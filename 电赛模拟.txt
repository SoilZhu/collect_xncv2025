电赛模拟
硬件：
摄像头：
	·iso不能过高——减小噪点
	·光圈不能过大——景深要深
	·曝光时间需要延长——增亮
MaixCAM屏幕分别率：552*368
MaixCAM-Pro屏幕分辨率：640*480

步骤：
读取图像（转灰度图【RGB三色通道变双色通道】——再二值化）——找出A4纸的黑线——计算距离——找出图形——根据比例计算边长（直径）


2024电赛题目：
棋盘颜色：深蓝+亮黄、红+蓝、红+绿、蓝+橙、黄+紫。对比度明显是否有利于定位棋盘？gray灰色的
根据题目进行的操作猜想：
·完成相应任务可以做一个简单的界面：选择题目1~6。
·将函数打包
·建立坐标系并进行九宫格标序
·图像缩放（可以根据find_plops中的w或者h判断）
·可以预先给定一张理想棋盘照片，并进行第一次棋盘定位
·关于uart串口传给主控的猜想参数，打算设立四个参数，第一个为九个格子坐标，让机械臂对九个格子进行一个选择并初次定位（-1，0，1~9），第二个参数判断黑白棋及其有无（三个状态0，1，2）；第三个参数为精准校验参数，打算设立9个状态（水平的前后左右，空间的四种旋转，还有一个0装态）。交换一下，第一个表示白棋或者黑棋，第二为九宫格，第三个为精准校验【可以将第三位的-1表示为垂直落子】

#几个请教的问题：如何查看find_lbp（）返回的值;为什么find_blobs找出的cx和cy不准确。为什么draw_keypoints中传入。find_lines找直线为什么总是找不准。设置颜色到底可不可以设置成color=（0，255，0）等。关于屏幕如何点击精准的方法·

步骤：
1、寻找九宫格：寻找色块(大九宫格)，根据返回的列表标定框，标定框内再进行操作（复制图像，若找到显示裁剪的图像，若未找到，显示原图像）
	LAB色块寻找黑线的阈值[[0,25,-30,30,-30,30]]（[[4,25,-11,9,-11，9]]），白色格的阈值[[71,85,-21,18,-2]].调用摄像头分辨率大小为640*480，像素点为307200，pixels阈值的像素涵盖矩形
#attempt:Unknown error: Image width and height must be a multiple of 2，裁剪图象时候宽高需为2的倍数，//2*2
#这里如果要找的准确点可以适当增大焦距，模糊图像
2、实时动态判断找到的最大色块标定框并在框内设置九宫格的九个状态，并进行排序（预想根据判断九个格子的状态来判断落子情况，一个格子有三个状态:0,1,2）
找九个状态的思路：
·裁剪大格子后再次调用blob方法找9个小格子的中心坐标（难搞，后来发现的merge参数）
·找出九条直线（当时候没想好为什么找直线，但是直觉觉得能找出位置关系就说明还是可以通过数学方法解决的）
·直接通过前面找的大格子blob返回的x,y,w,h数学计算每个格子的中心坐标位置（实在是没招了！，前面实操的时候老是搞不好，才想起来裁剪后的图像是不是坐标重置了，找直线调用的roi用的是裁剪前的图像坐标）
#attemple:一开始想边学边用找直线的方法标记一下九宫格，找直线get_regression；找多条需要调用find_lines方法（此方法传入的参数为roi，不需要进行），但是找多条直线始终实现不了，要么就是乱找线。
3.1、判断每个格子的状态（三种状态——白、黑、空）：
霍夫变换中有一个圆环检测方法：HoughCircles
maixpy自带的find_circles方法很废物（说什么对FFB【sram】占有率很高）
判断状态的方法：
·假如预先知道落子落在什么位置，那么直接看目的位置和实际位置是否对应或者说误差在一定范围内就好，预想是判断两张图片中坐标是否重叠（out）
·棋子落子后跟所有坐标的距离进行计算判断，看看距离哪个位置最近（以及距离最近的位置是否在正常范围内，此方法还可以判断是否在格子内），但是理论上会增加运行内存（需要考虑时间）
·可通过get_statistics方法找出指定区域的lab值后再根据找到的lab范围判断是否为黑白棋以及有无棋（打算将背景设置成绿色）
3.2、上一步判断了颜色状态，如果需要找的准的话还需要找出棋子外围轮廓并判断中心点和棋盘格子中心点差多少
3.3、最终没办法就只能使用模型训练的方法了
4、打包方法、设置ui界面。
5、纠正补充：对于旋转以及如何三维空间中投放到二维的问题。
***ai基于的预处理帮助：
·高斯去噪——高斯滤波是一种线性平滑滤波技术，主要用于去除高斯噪声并保留图像边缘。它通过高斯函数计算权重，对图像进行加权平均处理，使得距离中心像素越远的点对结果的影响越小（线性）
·中值滤波——中值滤波是一种非线性滤波技术，通过将每个像素的值替换为其邻域内像素值的中位数来实现去噪（非线性）
·核式形态学滤波——形态学滤波基于结构元素（核）与图像的几何关系进行处理，主要通过膨胀（Dilation）和腐蚀（Erosion）等操作实现（非线性，与卷积不同）
·边缘检测——边缘检测用于识别图像中物体的轮廓，通过检测像素值的突变（梯度变化）来定位边缘
思路：
·根据一条直线与水平线的夹角可以判定棋盘的旋转角度，并对帧图像进行旋转或者将机械臂反向旋转操作（机械臂反向旋转操作更加合理）2、根据两条平行线的比例推断棋盘水平旋转了多少，并进行相应操作。
·找出棋盘的两条平行线
·旋转线：先合并两条平行线，判断此线与水平夹角，此时应该出现两个情况做if判断：1.小角度2.大角度（暂时不知道机器判定角度是180°还是360°），然后根据角度进行图像的旋转，.rotate()此函数为图像旋转函数
·三维到二维：.resize()此为缩放函数（仔细想了一下，感觉用不到啊，但是在机械臂归位的时候可以矫正一下图像或者矫正机械臂【做一个循环，持续让机械臂小幅度上/下移动，直到误差缩小到一定范围】）。三维投射到二维就是将一个梯形还原为一个正方形（此任务较难，目前想到两个方案：1.操作图像，对图像进行算法恢复 2.移动机械臂，使摄像头水平，这个应该容易点）
思路反馈：由于现在调用的find_lines无法找到准确的直线，我发现这个找直线找的不是线段。后来发现有find_line_segments可以查找线段，但是效果是在一条直线上的会有多条不连续的角度不一的分线段，因此我需要考虑直线如何合并。现在cv库中有一种方法HoughLinesP霍夫变换直线检测，可以尝试使用（还有一个圆环检测的方法可供步骤二使用）。
·找出一条直线在线段上的min（x，y）和和max（x，y），可通过角度在一定范围、距离在一定范围判断线段是否连续在一条直线上
6、设置一个pid控制方法，帮助准确定位机械臂放置位置
·找出中心点和目标点，判断目标点在中心点的什么位置然后根据位置进行串口发送来移动机械臂位置
7.判断输赢
思路：
·在最后的列表中判断是否成线，可以先判断棋子数量是否达到
·黑棋、白棋输赢情况有三种——横*3、列*3、斜*2
·返回四种状态：黑赢、白赢、平局、继续

***8·最后阶段
淘汰任务3，此任务电赛结束后再去完成。
还需要写一个寻找落子中心的方法以及算法方法（权重法和穷举法，还看到有一个优先级的方法：先下在三连的地方，再按中心——四角——变点的顺序下棋）
可创建一个存储棋盘对应棋子信息的列表。
Ture就一直循环。别忘了给通信添加一个接收等待过程。
如果说find_blobs无法实现的话那么我将执行最后方案，使用训练的模型检测棋盘。
如果没检测到，则会



关于三子输赢的判断思路方法：
·最简单粗暴方式：直接列出所有情况
·根据黑白棋列表中是否有三个棋子的X坐标或者Y坐标相同判断（对角情况难以判断）
·根据线性函数判断，误差如何设置？
***
思路重拟：


